<div id="m-create" class="mask">
        <div class="modal">
            <div class="m-head">
                任務設定 <button class="btn-close" onclick="act.closeModal('create')">✕</button>
            </div>
            <div class="m-body">
                <div class="row row-center mb-0">
                    <input id="nt-title" class="inp flex-1 mb-0" placeholder="任務標題">
                    <div id="btn-pin-toggle" class="pin-btn" onclick="this.classList.toggle('active'); document.getElementById('nt-pinned').checked = this.classList.contains('active');">📌</div>
                    <input type="checkbox" id="nt-pinned" style="display:none">
                </div>
                <textarea id="nt-desc" class="inp inp-area mt-sm" placeholder="備註..."></textarea>
                
                <div class="row mt-sm">
                    <select id="nt-cat-select" class="inp flex-1">
                        <option value="每日">每日習慣</option>
                        <option value="工作">專案工作</option>
                        <option value="待辦" selected>待辦事項</option>
                        <option value="願望">願望清單</option>
                    </select>
                    <select id="nt-type" class="inp flex-1" style="border-left:none;">
                        <option value="normal">一般任務</option>
                        <option value="count">計次任務</option>
                    </select>
                </div>

                <div class="row row-center" style="justify-content:space-between; margin-top:10px; border-bottom:1px solid #eee; padding-bottom:5px;">
                    <label class="lbl" style="margin:0">子任務</label>
                    <button class="btn-xs" onclick="act.addSubtask()">+ 新增</button>
                </div>
                <div id="nt-subs" class="mt-sm"></div>
                
                <div class="box-gray mt-md">
                    <div class="row row-center" style="justify-content:space-between;">
                        <label class="lbl" style="margin:0">難度: <span id="nt-diff-label" style="font-weight:bold; color:#4db6ac">中等 (M)</span></label>
                    </div>
                    <input type="range" id="nt-diff-range" min="1" max="4" value="2" class="slider" oninput="act.updateDiffLabel(this.value)">
                    
                    <div class="row mt-sm row-center">
                        <label class="lbl" style="margin:0; margin-right:10px;">屬性:</label>
                        <select id="nt-attr-select" class="inp flex-1" style="margin:0;">
                            <option value="">(無)</option>
                            <option value="str">💪 體能</option>
                            <option value="int">🧠 智慧</option>
                            <option value="vit">🔥 毅力</option>
                            <option value="chr">✨ 魅力</option>
                            <option value="dex">👐 靈巧</option>
                            <option value="luc">🍀 幸運</option>
                        </select>
                    </div>
                </div>
                
                <label class="lbl" style="margin-top:15px; color:#aaa; font-size:0.8rem;">進階設定</label>
                <div class="row">
                    <input type="datetime-local" id="nt-deadline" class="inp flex-1">
                    <input id="nt-target" type="tel" class="inp flex-1" style="display:none;" placeholder="目標次數">
                </div>
            </div>
            <div class="m-foot">
                <button class="btn-ok" style="flex:2;" onclick="act.submitTask()">建立任務</button>
            </div>
        </div>
    </div>